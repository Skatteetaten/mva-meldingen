{"componentChunkName":"component---src-templates-documentation-template-js","path":"/documentation/test/","result":{"data":{"markdownRemark":{"htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Informasjonen på denne siden er beregnet til de som har avtalt med Skatteetaten å delta i testløpet for modernisering av mva-meldingen. Ønsker du å delta ta gjerne kontakt via email: mva-modernisering@skatteetaten.no. Vi vil da sørge for at du får tilgang på testbruker, samt god tilgang til støtte for tekniske avklaringer. Testbrukeren er nødvendig for å få tilgang til å kjøre testapplikasjonen mot Skatteetatens tjenester. (Validering- og innsendingstjenesten)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Vi har kommet til Test 3. Se lengre ned på siden for fullstendig tidsplan.\nTestdokumentasjonen i Test 3 består av"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Beskrivelse av api - "},{"type":"element","tagName":"a","properties":{"href":"https://skatteetaten.github.io/mva-meldingen/documentation/api/"},"children":[{"type":"text","value":"https://skatteetaten.github.io/mva-meldingen/documentation/api/"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"XSD - "},{"type":"element","tagName":"a","properties":{"href":"https://skatteetaten.github.io/mva-meldingen/documentation/informasjonsmodell/"},"children":[{"type":"text","value":"https://skatteetaten.github.io/mva-meldingen/documentation/informasjonsmodell/"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Valideringsregler - "},{"type":"element","tagName":"a","properties":{"href":"https://skatteetaten.github.io/mva-meldingen/documentation/forretningsregler/"},"children":[{"type":"text","value":"https://skatteetaten.github.io/mva-meldingen/documentation/forretningsregler/"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Valideringsregler som er en del av testen – se lenger ned på denne siden"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Eksempler på testtilfeller – se lenger nede på denne siden"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"I tillegg er det behov for testbruker. Dette distribueres direkte til de som skal være med å teste."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{"id":"testplan","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#testplan","ariaLabel":"testplan permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Testplan"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"innhold-i-testen","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#innhold-i-testen","ariaLabel":"innhold i testen permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Innhold i testen"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Konkret må sluttbrukersystemet gjøre følgende:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Logge inn hos ID-porten for å få en sesjon (og token)."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Utvikle en applikasjon/klient som:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Sende en request til Skatteetatens tjeneste for å validere en mva-melding."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Oppretter Instans på Altinn3 appen."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Last Opp 1 MvaMeldingInnsending"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Last Opp 1 MvaMelding"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Last Opp 0 eller flere Vedlegg"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Sender Inn MvaMeldingInnsending"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Skatteetaten har tilgjengeliggjort en testapplikasjon som viser hvordan trinnene beskrevet over kan utføres.\nDen er skrevet i "},{"type":"element","tagName":"a","properties":{"href":"https://jupyter.org/"},"children":[{"type":"text","value":"jupyter notebook formatet"}]},{"type":"text","value":":"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/Skatteetaten/mva-meldingen/blob/master/docs/documentation/test/demo.ipynb"},"children":[{"type":"text","value":"Jupyter notebook demo for henting og validering"}]},{"type":"text","value":". Last ned katalogen 'test' og kjør skriptet demo.ipynb (skriptet vil utføre alle trinn som inngår i prosessen: kalle ping tjeneste å sjekke kobling og validere mva-melding)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/Skatteetaten/mva-meldingen/blob/master/docs/documentation/test/innsending-eksempel.ipynb"},"children":[{"type":"text","value":"Jupyter notebook demo for henting, validering og innsending"}]},{"type":"text","value":". Kjør skriptet innsending.ipynb. Den vil kjøre alle stegene i prosessen."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/Skatteetaten/mva-meldingen/blob/master/docs/documentation/test/Steg/logge_inn_idporten.py"},"children":[{"type":"text","value":"Pyton skript å hent token"}]},{"type":"text","value":" og "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/Skatteetaten/mva-meldingen/blob/master/docs/documentation/test/MeldingValidering.postman_collection.json"},"children":[{"type":"text","value":"postman skript å validere melding"}]},{"type":"text","value":". Første logge inn hos ID-Porten (se nedover), og da lagre token i format \"Bearer "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"hentet-token"}]},{"type":"text","value":"\" som miljø variabel med navn \"test-bearer\" i postman, og bruk postman skript å validere melding."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/Skatteetaten/mva-meldingen/tree/master/docs/documentation/test/eksempler/melding"},"children":[{"type":"text","value":"Eksempel XML-er"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"ta-i-bruk-id-porten","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#ta-i-bruk-id-porten","ariaLabel":"ta i bruk id porten permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Ta i bruk ID-porten"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Når man starter å teste kan Skatteetatens ID-porten-integrasjon benyttes, men det anbefales å bestille egen integrasjon mot ID-porten så tidlig som mulig, både fordi når produksjonssetting intreffer må egen integrasjon mot ID-porten benyttes, og fordi prosessen er delvis manuell. Prosessen går mot Digitaliseringsdirektoratet (DigDir), og detaljer rundt hvordan man oppretter integrasjonen og tar i bruk ID-porten er beskrevet her: "},{"type":"element","tagName":"a","properties":{"href":"https://samarbeid.digdir.no/id-porten/id-porten/18"},"children":[{"type":"text","value":"https://samarbeid.digdir.no/id-porten/id-porten/18"}]},{"type":"text","value":". En annen fordel med å starte prosessen tidlig er at man kan teste integrasjonen i test-miljøet. Det må også opprettes egen integrasjon i produksjon. Under bestillingen må dere oppgi at dere ønsker tilgang til skattemeldings-API fra skatteetaten."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Kundeforholdet hos DigDir gir tilgang til deres selvbetjeningsløsning som igjen gir tilgang til administrasjon av Kundens bruk av ID-porten. I selvbetjeningsløsningen kan kunden opprette en såkalt client_id og definere en callback-url:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"client_id: en unik automatisk generert identifikator for tjenesten."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"callback-url: Uri-en som klienten får lov å redirigere nettleseren til etter innlogging. Etter en vellykket innlogging i ID-porten vil brukeren redirigeres til denne url-en."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Inntil kundeforhold hos DigDir er etablert og integrasjon opprettet, kan sluttbrukersystemene i benytte Skatteetatens integrasjon. For denne testen har Skatteetaten opprettet følgende "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"client_id"}]},{"type":"text","value":" som kan benyttes av sluttbrukersystemene:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"client_id: 38e634d9-5682-44ae-9b60-db636efe3156"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Callback-URL til denne "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"client_id"}]},{"type":"text","value":" er satt til "},{"type":"element","tagName":"a","properties":{"href":"http://localhost:12345/token"},"children":[{"type":"text","value":"http://localhost:12345/token"}]},{"type":"text","value":" (Hvis det er konsumenter som ønsker andre callback-URL kan vi ordne det)"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Nyttige lenker:"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Klienten bruker test-miljøet i DigDir, \"verifikasjon 2\": "},{"type":"element","tagName":"a","properties":{"href":"https://samarbeid.difi.no/node/232"},"children":[{"type":"text","value":"https://samarbeid.difi.no/node/232"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"OIDC-integrasjonen er beskrevet her: "},{"type":"element","tagName":"a","properties":{"href":"https://difi.github.io/felleslosninger/oidc_index.html"},"children":[{"type":"text","value":"https://difi.github.io/felleslosninger/oidc_index.html"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Hvordan lage en klient i selvregistreringen: "},{"type":"element","tagName":"a","properties":{"href":"https://minside-samarbeid.difi.no/organization-home/services/service-admin#/"},"children":[{"type":"text","value":"https://minside-samarbeid.difi.no/organization-home/services/service-admin#/"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"logge-inn-hos-id-porten","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#logge-inn-hos-id-porten","ariaLabel":"logge inn hos id porten permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Logge inn hos ID-porten"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"ID-porten login kan implementeres i alle typer sluttbrukersystemer"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Desktop Applikasjon"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Web Applikasjon"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"under forutsetning av at applikasjonen kan åpne en URL i en nettleser hvor login gjennomføres og samtidig som den kan kjøre en web-server som mottar en web-request (i form av en redirect fra ID-porten etter login) på callback-url'en."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Sluttbrukersystemet må gjøre følgende:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Starte system browser og gjøre autorisasjonskall mot ID-porten. Les mer om det her: "},{"type":"element","tagName":"a","properties":{"href":"https://difi.github.io/felleslosninger/oidc_protocol_authorize.html"},"children":[{"type":"text","value":"https://difi.github.io/felleslosninger/oidc_protocol_authorize.html"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Brukeren blir da sendt til ID-porten for innlogging. Dere kan benytte eksisterende test-brukere som dere benytter til test mot skattemeldingen i dag."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Sette opp en webserver som venter på callback fra browseren. Etter vellykket pålogging i ID-porten sendes brukes til denne webserveren. Denne webserveren må være satt til å lytte på callback-URL "},{"type":"element","tagName":"a","properties":{"href":"http://localhost:12345/token"},"children":[{"type":"text","value":"http://localhost:12345/token"}]},{"type":"text","value":" (ref. forrige kapittel)."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Gjøre et tokenforespørsel. Les mer om det her: "},{"type":"element","tagName":"a","properties":{"href":"https://difi.github.io/felleslosninger/oidc_protocol_token.html"},"children":[{"type":"text","value":"https://difi.github.io/felleslosninger/oidc_protocol_token.html"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Vi benytter følgende testmiljø hos ID-porten:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"/authorize endpoint: "},{"type":"element","tagName":"a","properties":{"href":"https://oidc-ver2.difi.no/idporten-oidc-provider/authorize"},"children":[{"type":"text","value":"https://oidc-ver2.difi.no/idporten-oidc-provider/authorize"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"/token endpoint: "},{"type":"element","tagName":"a","properties":{"href":"https://oidc-ver2.difi.no/idporten-oidc-provider/token"},"children":[{"type":"text","value":"https://oidc-ver2.difi.no/idporten-oidc-provider/token"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"For detaljer rundt hvilken HTTP parametere som må sendes med i kallet, se filen "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/Skatteetaten/mva-meldingen/blob/master/docs/documentation/test/Steg/logge_inn_idporten.py"},"children":[{"type":"text","value":"logge"},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"inn"}]},{"type":"text","value":"idporten.py"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"kalle-mva-meldings-api","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#kalle-mva-meldings-api","ariaLabel":"kalle mva meldings api permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Kalle Mva-Meldings-API"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Etter login og tokenforespørsel vil man ha et ID-porten-access-token. Dette tokenet benyttes som Bearer-token i HTTP-kall mot valideringstjenesten og må også veklses til et altinn-acess-token som må benyttes som Bearer-token i HTTP-kallene i innsendingsprosessen mot Skatteetatens Altinn3-API for mva-melding-innsending. Se detaljer for API'ene under "},{"type":"element","tagName":"a","properties":{"href":"https://skatteetaten.github.io/mva-meldingen/documentation/api/","target":"_blank"},"children":[{"type":"text","value":"Api"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Se også detaljer i kjørende eksempler for både login, validering og innsending, skrevet i Python nevnt under kapittelet \"Innhold i testen\"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{"id":"valderingsregler","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#valderingsregler","ariaLabel":"valderingsregler permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Valderingsregler"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Valideringsregler klare for test:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Summen av merverviavgift for hver avgiftslinje er ikke lik feltet fastsattMerverdiavgift"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Beregnet avgift i avgiftslinje er ulik produktet av grunnlag og sats"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Merknad til beløp med motsatt fortegn som gjelder grunnlag og utgående avgift mangler"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Merknad til beløp med motsatt fortegn som gjelder fradragsført inngående avgift mangler"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Merknad til beløp med motsatt fortegn som gjelder spesifikasjonslinje for tilbakeføring av inngående mva gitt i mval §9-6 og §9-7"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Fradragsført inngående avgift som gjelder varer kjøpt fra utlandet med fradragsrett, skal være mindre enn eller lik utgående avgift (kode 81)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Fradragsført inngående avgift som gjelder varer kjøpt fra utlandet med fradragsrett, skal være mindre enn eller lik utgående avgift (kode 83)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Fradragsført inngående avgift som gjelder tjenester kjøpt fra utlandet med fradragsrett skal være mindre enn eller lik utgående avgift (kode 86)  "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Fradragsført inngående avgift som gjelder tjenester kjøpt fra utlandet med fradragsrett skal være mindre enn eller lik utgående avgift (kode 88)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Fradragsført inngående avgift som gjelder kjøp av klimakvoter og gull med fradragsrett, skal være mindre enn eller lik utgående avgift"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Utgående avgift skal være beregnet dersom det er ført fradrag for inngående avgift som gjelder kjøp av varer fra utlandet med fradragsrett (kode 81)  "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Utgående avgift skal være beregnet dersom det er ført fradrag for inngående avgift som gjelder kjøp av varer fra utlandet med fradragsrett (kode 83)  "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Utgående avgift skal være beregnet dersom det er ført fradrag for inngående avgift som gjelder tjenester kjøpt fra utlandet med fradragsrett (kode 86)  "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Utgående avgift skal være beregnet dersom det er ført fradrag for inngående avgift som gjelder tjenester kjøpt fra utlandet med fradragsrett (kode 88)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Utgående avgift skal være beregnet dersom det er ført fradrag for inngående avgift som gjelder kjøp av klimakvoter og gull med fradragsrett  "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Det skal være fradragsført inngående avgift dersom det er beregnet utgående avgift ved kjøp av varer fra utlandet med fradragsrett (kode 81)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Det skal være fradragsført inngående avgift dersom det er beregnet utgående avgift ved kjøp av varer fra utlandet med fradragsrett (kode 83)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Det skal være fradragsført inngående avgift dersom det er beregnet utgående avgift for tjenester kjøpt fra utlandet med fradragsrett (kode 86)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Det skal være fradragsført inngående avgift dersom det er beregnet utgående avgift for tjenester kjøpt fra utlandet med fradragsrett (kode 88)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Det skal være fradragsført inngående avgift dersom det er beregnet utgående avgift ved kjøp av klimakvoter og gull med fradragsrett"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Spesifikasjonslinje som gjelder tap på krav kan kun sendes inn på mva-kode 1, 11, 12 eller 13"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Spesifikasjonslinje som gjelder uttak kan kun sendes inn på mva-kode 3, 31, 32 eller 33"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Spesifikasjonslinje som gjelder uttak kan kun sendes inn på mva-kode 1"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Spesifikasjonslinje som gjelder tilbakeføring av inngående mva gitt i mva §9-6 og §9-7 kan kun sendes inn på mva-kode 1"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Omsetning før registrering kan ikke settes som merknad på denne mva-koden"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Omberegning/retur kan ikke settes som merknad på denne mva-koden"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Midlertidig innførsel kan ikke settes som merknad på denne mva-koden"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Gjeninnførsel kan ikke settes som merknad på denne mva-koden"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Tolldeklarasjon på feil org.nr. kan ikke settes som merknad på denne mva-koden"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Gjenutførsel kan ikke settes som merknad på denne mva-koden"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Gjenutførsel eller retur kan ikke settes som merknad på denne mva-koden"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Midlertid utførsel kan ikke settes som merknad på denne mva-koden"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Tjenesteeksport kan ikke settes som merknad på denne mva-koden"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Store anskaffelser kan ikke settes som merknad på denne mva-koden"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Anskaffelser før mva-plikt kan ikke settes som merknad på denne mva-koden"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Forsikringsoppgjør kan ikke settes som merknad på denne mva-koden"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Sesongvariasjon kan ikke settes som merknad på denne mva-koden"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Kreditnota kan ikke settes som merknad på denne mva-koden"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{"id":"testtilfeller-mva-melding","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#testtilfeller-mva-melding","ariaLabel":"testtilfeller mva melding permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Testtilfeller mva-melding"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Se eksempler på testtilfeller for ny mva-melding "},{"type":"element","tagName":"a","properties":{"href":"/mva-meldingen/2db8405c7361104c3518159b21481719/Testtilfeller%20mva-melding.xlsx"},"children":[{"type":"text","value":"testtilfeller for ny mva-melding"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Eksempler på xml-filer: "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/Skatteetaten/mva-meldingen/blob/master/docs/documentation/test/eksempler/melding/"},"children":[{"type":"text","value":"https://github.com/Skatteetaten/mva-meldingen/blob/master/docs/documentation/test/eksempler/melding/"}]},{"type":"text","value":"\nInntil videre skal det ikke være %-tegn i fila dere sender inn"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{"id":"tidsplan-for-test","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#tidsplan-for-test","ariaLabel":"tidsplan for test permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Tidsplan for test"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Tidsplanen under viser når det vi være mulig å teste integrasjonene mot Skatteetaten sine nye løsninger."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"table","properties":{"align":"center"},"children":[{"type":"text","value":"\n  "},{"type":"element","tagName":"tbody","properties":{},"children":[{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"th","properties":{"align":"center"},"children":[{"type":"text","value":"Hva"}]},{"type":"element","tagName":"th","properties":{"align":"center"},"children":[{"type":"text","value":"Når"}]},{"type":"element","tagName":"th","properties":{"align":"center"},"children":[{"type":"text","value":"Innhold"}]}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Dokumentasjon XSD"}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"28.09.2020"}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"ul","properties":{},"children":[{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Oppdatert xsd etter tilbakemeldinger i møte 14.9"}]}]}]}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Test 1 – teknisk verifikasjon"}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"nov. 2020"}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"element","tagName":"ul","properties":{},"children":[{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Valideringstjeneste -\"Dummy\"  (Ping fra SBS)"}]}]}]}]},{"type":"text","value":" \n  "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Test 2 – syltynn valideringstjeneste og teknisk verifikasjon av innsendingstjenesten"}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"jan. 2021"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":" \n  "},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n\t"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Valideringstjeneste "}]},{"type":"text","value":"\n\t"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Helt enkel tjeneste med en eller få enkle valideringer "}]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Test 3 - noe rikere valideringstjeneste og en enkel innsendingstjeneste"}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"mar. 2021"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"  \n  "},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n\t"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Valideringstjeneste - Valideringstjeneste som inneholder mange av de valideringene som skal brukes"}]},{"type":"text","value":"\n\t"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Innsendingstjeneste - Enkel innsendingstjeneste som skal verifisere innsendingen og gi kvittering tilbake"}]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Test 4 – komplett tjeneste"}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"mai.  2021"}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"\n  "},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n\t"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Valideringstjeneste - Komplett tjeneste, sånn den skal være til pilot, er på plass"}]},{"type":"text","value":"\n\t"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Innsendingstjeneste - Komplett tjeneste, sånn den skal være til pilot, er på plass"}]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "}]}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Test 5 - hovedtest før pilot"}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"aug. 2021"}]},{"type":"element","tagName":"td","properties":{},"children":[]}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Pilot"}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"aug. 2021"}]},{"type":"element","tagName":"td","properties":{},"children":[]}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Produksjon"}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"01.01.2022"}]},{"type":"element","tagName":"td","properties":{},"children":[]}]},{"type":"text","value":"  \n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"/mva-meldingen/5a11bd6f21053bbea68fe2dd2ae2e08a/Testplan.png","alt":"Testplan"},"children":[]}]}],"data":{"quirksMode":false}},"headings":[{"value":"Testplan","depth":1},{"value":"Innhold i testen","depth":2},{"value":"Ta i bruk ID-porten","depth":2},{"value":"Logge inn hos ID-porten","depth":2},{"value":"Kalle Mva-Meldings-API","depth":2},{"value":"Valderingsregler","depth":1},{"value":"Testtilfeller mva-melding","depth":1},{"value":"Tidsplan for test","depth":1}],"fields":{"slug":"/documentation/test/"},"frontmatter":{"title":"Test"}}},"pageContext":{"slug":"/documentation/test/"}},"staticQueryHashes":["270254161","270254161"]}